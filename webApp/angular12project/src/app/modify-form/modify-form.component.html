<div>
  <div>
    <app-navbar></app-navbar>
  </div>

  <div class="grandParentContainer" *ngIf="modify_doctor; else Patient">
    <h1><b>Modifica Dottore</b></h1>
    <div class="parentContainer">
      <form action="modify-form.component.ts" method="post" id="modify_form"> <!--[formGroup]="angForm" novalidate-->

        <div class="container">
          <mat-form-field>
            <mat-label>Username</mat-label>
            <input matInput type="text" placeholder="" name="username" [formControl]="username" required>
            <mat-error *ngIf="username.hasError('required')">Devi inserire il campo</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Nome</mat-label>
            <input matInput type="text" placeholder="" name="name" [formControl]="name" required>
            <mat-error *ngIf="name.hasError('required')">Devi inserire il campo</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Cognome</mat-label>
            <input matInput type="text" placeholder="" name="surname" [formControl]="surname" required>
            <mat-error *ngIf="surname.hasError('required')">Devi inserire il campo</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>e-mail</mat-label>
            <input matInput type="email" placeholder="" name="mail" [formControl]="mail" required>
            <mat-error *ngIf="mail.hasError('required')">Devi inserire il campo</mat-error>
            <mat-error *ngIf="mail.hasError('email')">Devi inserire una mail valida</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Data di nascita</mat-label>
            <input matInput type="date" placeholder="" name="dob" [formControl]="dob" required>
            <mat-error *ngIf="dob.hasError('required')">Devi inserire il campo</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Codice fiscale</mat-label>
            <input matInput type="text" placeholder="" name="tc" [formControl]="tc" readonly>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Ruolo</mat-label>
            <input matInput type="text" placeholder="" name="role" [formControl]="role" required>
            <mat-error *ngIf="role.hasError('required')">Devi inserire il campo</mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Numero di Telefono</mat-label>
            <input matInput type="text" placeholder="" name="phone" [formControl]="phone" required>
            <mat-error *ngIf="phone.hasError('required')">Devi inserire il campo</mat-error>
            <mat-error *ngIf="phone.hasError('maxlength')">Devi inserire un numero valido</mat-error>
          </mat-form-field>

          <button mat-button type="submit" (click)="save()">Salva</button>
        </div>

      </form>
    </div>
  </div>

  <ng-template #Patient>
    <div class="grandParentContainer" *ngIf="modify_patient; else Sensor">
      <h1><b>Modifica Paziente</b></h1>
      <div class="parentContainer">
        <form action="modify-form.component.ts" method="post" id="modify_form_patient">

          <div class="container">
            <mat-form-field>
              <mat-label>Username</mat-label>
              <input matInput type="text" placeholder="" name="username" [formControl]="username" required>
              <mat-error *ngIf="username.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Nome</mat-label>
              <input matInput type="text" placeholder="" name="name" [formControl]="name" required>
              <mat-error *ngIf="name.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Cognome</mat-label>
              <input matInput type="text" placeholder="" name="surname" [formControl]="surname" required>
              <mat-error *ngIf="surname.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>e-mail</mat-label>
              <input matInput type="email" placeholder="" name="mail" [formControl]="mail" required>
              <mat-error *ngIf="mail.hasError('required')">Devi inserire il campo</mat-error>
              <mat-error *ngIf="mail.hasError('email')">Devi inserire una mail valida</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Data di nascita</mat-label>
              <input matInput type="date" placeholder="" name="dob" [formControl]="dob" required>
              <mat-error *ngIf="dob.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Codice fiscale</mat-label>
              <input matInput type="text" placeholder="" name="tc" [formControl]="tc" readonly>
            </mat-form-field>

            <div *ngIf="user.type == 'ADMIN'">
              <mat-form-field>
                <mat-label>Dottore</mat-label>
                <input matInput type="text" placeholder="" name="doctor" [formControl]="doctor" required>
                <mat-error *ngIf="doctor.hasError('required')">Devi inserire il campo</mat-error>
                <mat-error *ngIf="doctor.hasError('maxlength')">Devi inserire un CF valido</mat-error>
              </mat-form-field>
            </div>

            <mat-form-field>
              <mat-label>Recapito telefonico</mat-label>
              <input matInput type="text" placeholder="" name="phone" [formControl]="phone" required>
              <mat-error *ngIf="phone.hasError('required')">Devi inserire il campo</mat-error>
              <mat-error *ngIf="phone.hasError('maxlength')">Devi inserire un numero valido</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Data di ricovero</mat-label>
              <input matInput type="date" placeholder="" name="dor" [formControl]="dor" required>
              <mat-error *ngIf="dor.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Indirizzo</mat-label>
              <input matInput type="text" placeholder="" name="address" [formControl]="address" required>
              <mat-error *ngIf="address.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Descrizione</mat-label>
              <input matInput type="text" placeholder="" name="description" [formControl]="description" required>
              <mat-error *ngIf="description.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <button mat-button (click)="save()">Salva</button>
          </div>

        </form>
      </div>
    </div>
  </ng-template>

  <ng-template #Sensor>
    <div class="grandParentContainer" *ngIf="modify_sensor; else modifySensorDoctor">
      <h1><b>Modifica Sensore</b></h1>
      <div class="parentContainer">
        <form action="modify-form.component.ts" method="post" id="modify_form_sensor">

          <div class="container">

            <mat-form-field>
              <mat-label>Nome</mat-label>
              <input matInput type="text" placeholder="" name="name" [formControl]="name_sensor" required>
              <mat-error *ngIf="name_sensor.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Unità di misura</mat-label>
              <input matInput type="text" placeholder="" name="um" [formControl]="um" required>
              <mat-error *ngIf="um.hasError('required')">Devi inserire il campo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Soglia sensore</mat-label>
              <input matInput type="text" placeholder="" name="thr" [formControl]="thr" readonly>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Tipo sensore</mat-label>
              <input matInput type="text" placeholder="" name="typeSensor" [formControl]="typeSensor" readonly>
            </mat-form-field>

            <button mat-button (click)="save()">Salva</button>
          </div>

        </form>
      </div>
    </div>
  </ng-template>

  <ng-template #modifySensorDoctor>
    <div class="grandParentContainer" *ngIf="modify_sensor_doctor">
      <h1><b>Modifica Sensore</b></h1>
      <div class="parentContainer">
        <form action="modify-form.component.ts" method="post" id="modify_form_sensor_doctor">

          <div class="container">

            <mat-form-field>
              <mat-label>Nome</mat-label>
              <input matInput type="text" placeholder="" name="name" [formControl]="name_sensor" readonly>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Unità di misura</mat-label>
              <input matInput type="text" placeholder="" name="um" [formControl]="um" readonly>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Soglia sensore</mat-label>
              <input matInput type="text" placeholder="" name="thr" [formControl]="thr" required>
              <mat-error *ngIf="thr.hasError('required')">Devi inserire il campo</mat-error>
              <mat-error *ngIf="tc.hasError('min')">Devi inserire un valore positivo</mat-error>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Tipo sensore</mat-label>
              <input matInput type="text" placeholder="" name="typeSensor" [formControl]="typeSensor" readonly>
            </mat-form-field>

            <button mat-button (click)="save()">Salva</button>
          </div>

        </form>
      </div>
    </div>
  </ng-template>

</div>
